<div class="phone-input-container tw-flex tw-gap-0" (clickOutside)="closeDropdown()">

  <!-- Country Code Selector -->
  <div class="tw-relative">
    <button type="button" (click)="toggleDropdown()" [disabled]="disabled"
      class="tw-flex dropdown-button tw-items-center tw-gap-1 tw-px-3 tw-py-3 tw-bg-gray-50 tw-border tw-border-gray-300 tw-border-r-0 tw-rounded-l-lg tw-transition-all tw-duration-200 hover:tw-bg-gray-100 focus:tw-outline-none"
      [class.tw-opacity-50]="disabled">
      <span class="tw-text-sm tw-font-medium tw-text-gray-700">{{ selectedCountry?.code }}</span>
      <i class="pi pi-chevron-down tw-text-xs tw-text-gray-500 tw-transition-transform tw-duration-200"
        [class.tw-rotate-180]="isDropdownOpen"></i>
    </button>

    <!-- Country Dropdown -->
    <div *ngIf="isDropdownOpen"
      class="tw-absolute tw-z-50 tw-left-0 tw-mt-1 tw-w-56 tw-bg-white tw-border tw-border-gray-200 tw-rounded-lg tw-shadow-lg tw-overflow-hidden">
      <ul class="tw-max-h-48 tw-pl-0 tw-overflow-y-auto">
        <li *ngFor="let country of countryCodes" (click)="selectCountry(country)"
          class="tw-flex tw-items-center tw-gap-3 tw-px-3 tw-py-2 tw-cursor-pointer tw-transition-colors hover:tw-bg-primary-light"
          [class.tw-bg-primary-light]="selectedCountry?.code === country.code">
          <span class="tw-flex-1 tw-text-sm tw-text-gray-700">{{ country.country }}</span>
          <span class="tw-text-sm tw-font-medium tw-text-gray-500">{{ country.code }}</span>
          <i *ngIf="selectedCountry?.code === country.code" class="pi pi-check tw-text-primary tw-text-sm"></i>
        </li>
      </ul>
    </div>
  </div>

  <!-- Phone Number Input -->
  <input type="tel" [value]="phoneNumber" (input)="onPhoneInput($event)" (blur)="onBlur()" [placeholder]="placeholder"
    [disabled]="disabled"
    class="tw-flex-1 tw-px-4 tw-py-3 tw-border tw-border-gray-300 tw-rounded-r-lg tw-transition-all tw-duration-200 focus:tw-outline-none focus:tw-border-primary focus:tw-ring-2 focus:tw-ring-primary/20"
    [class.tw-opacity-50]="disabled" />

</div>
